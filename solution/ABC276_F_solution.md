考虑已经知道了 $K=i-1$ 的答案，如何求 $K=i$ 的答案。

当新加一个数 $A_i$ 时，答案的分母应从 $(i-1)^2$ 变为 $i^2$。

考虑选上 $A_i$ 的贡献，如果 $A_i$ 作为较大值，则另一个数必然小于等于 $A_i$，故我们需要统计前缀小于等于 $A_i$ 的数的个数，树状数组不难解决。

如果 $A_i$ 不作为最大值，同理另一个数必然大于 $A_i$，我们需要统计大于 $A_i$ 的数的总和即可，同样可以使用树状数组。

时间复杂度 $\mathcal O(N\log N)$。
